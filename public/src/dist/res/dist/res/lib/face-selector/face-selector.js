(function(e){e.fn.emojiSelector=function(t){var n={id:"facebox",path:"face/",assign:"content"},r=e.extend(n,t),i=e("#"+r.assign),s=r.id,o=r.path,u=["angry","anguished","astonished","blush","broken_heart","clap","cold_sweat","confounded","confused","cry","disappointed","dizzy_face","expressionless","fearful","flushed","frowning","grimacing","grin","grinning","heart_eyes","heart","hushed","innocent","joy","kissing_closed_eyes","kissing_heart","kissing","laughing","mask","muscle","ok_hand","open_mouth","pensive","persevere","point_down","point_left","point_right","pray","relaxed","relieved","satisfied","scream","sleeping","sleepy","smile","smiley","smirk","sob","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sunglasses","sweat_smile","sweat","thumbsdown","thumbsup","unamused","v","wink","wink2","zzz"];if(i.length<=0)return alert("缺少表情赋值对象。"),!1;e(this).click(function(t){var n,i;if(e("#"+s).length<=0){n='<div id="'+s+'" style="position:absolute;display:none;z-index:1000;" class="qqFace">'+'<table border="0" cellspacing="0" cellpadding="0"><tr>';for(var a=1;a<=60;a++)i=u[a-1],labFaceStr=":"+i+":",n+='<td><img class="emoji-selector-icon" src="'+o+i+'.png" onclick="$(\'#'+r.assign+"').insertAtCaret('"+labFaceStr+"');\" /></td>",a%15==0&&(n+="</tr><tr>");n+="</tr></table></div>"}e(this).parent().append(n);var f=e(this).position(),l=f.top+e(this).outerHeight();e("#"+s).css("top",l),e("#"+s).css("left",f.left),e("#"+s).show(),t.stopPropagation()}),e(document).click(function(){e("#"+s).hide(),e("#"+s).remove()})}})(jQuery),jQuery.fn.extend({insertAtCaret:function(e,t){var n=$(this).get(0);if(document.all&&n.createTextRange&&n.caretPos){var r=n.caretPos;r.text=r.text.charAt(r.text.length-1)==""?e+"":e}else if(n.setSelectionRange){var i=n.selectionStart,s=n.selectionEnd,o=n.value.substring(0,i),u=n.value.substring(s);n.value=o+e+u,n.focus();var a=e.length;n.setSelectionRange(i+a,i+a),n.blur()}else n.value+=e}});