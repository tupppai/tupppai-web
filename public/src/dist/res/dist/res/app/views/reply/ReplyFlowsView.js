define(["masonry","imagesLoaded","app/views/Base","app/models/Base","app/models/Like","app/collections/Replies","tpl!app/templates/reply/ReplyFlowsView.html"],function(e,t,n,r,i,s,o){"use strict";return n.extend({collection:s,tagName:"div",className:"reply-container grid",template:o,events:{"click .like_toggle":"likeToggle","click .pressed":"pressed","mouseenter .reply-main":"replyScroll","mouseleave .reply-main":"replyScroll"},replyScroll:function(e){var t=$(e.currentTarget).children().children("img").length,n=$(e.currentTarget).width()*(t-1),r=Math.abs(($(e.currentTarget).siblings(".reply-footer").find(".nav").width()-$(".nav-bottom").width())/n),i=$(e.currentTarget).attr("time"),s=2;if(e.type=="mouseenter"){i&&clearInterval(i);var o=$(e.currentTarget).scrollLeft();i=setInterval(function(){o+=s;var t=Math.round(o/$(e.currentTarget).width());$(e.currentTarget).siblings(".reply-footer").find(".nav").children("span").removeClass("nav-pressed"),$(e.currentTarget).siblings(".reply-footer").find(".nav").children("span").eq(t).addClass("nav-pressed"),o>=n&&(clearInterval(i),o=n),$(e.currentTarget).scrollLeft(o),$(e.currentTarget).siblings(".reply-footer").children().children(".nav-bottom").css({left:o*r+"px"}),$(e.currentTarget).attr("time",i)},1)}if(e.type=="mouseleave"){i&&clearInterval(i);var o=$(e.currentTarget).scrollLeft();i=setInterval(function(){o-=s;var t=Math.round(o/$(e.currentTarget).width());$(e.currentTarget).siblings(".reply-footer").find(".nav").children("span").removeClass("nav-pressed"),$(e.currentTarget).siblings(".reply-footer").find(".nav").children("span").eq(t).addClass("nav-pressed"),o<=0&&(clearInterval(i),o=0),$(e.currentTarget).scrollLeft(o),$(e.currentTarget).siblings(".reply-footer").children().children(".nav-bottom").css({left:o*r+"px"}),$(e.currentTarget).attr("time",i)},1)}},pressed:function(e){$(e.currentTarget).addClass("nav-pressed").siblings().removeClass("nav-pressed");var t=$(e.currentTarget).index();$(e.currentTarget).parents(".reply-footer").siblings(".reply-main").scrollLeft(t*280),$(e.currentTarget).siblings(".nav-bottom").animate({left:t*$(e.currentTarget).width()+"px"}),$(e.currentTarget).addClass("nav-pressed").siblings().removeClass("nav-pressed")},construct:function(){this.listenTo(this.collection,"change",this.renderMasonry),this.scroll(),this.collection.loading()},render:function(){this.renderMasonry()}})});