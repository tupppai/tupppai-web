define(["app/views/Base","app/models/User","tpl!app/templates/register/UserBingdingView.html"],function(e,t,n){"use strict";return e.extend({tagName:"div",className:"",template:n,construct:function(){var e=this;$(".bingding-popup").fancybox({afterShow:function(){$("#sned_code_Bingding").unbind("click").click(e.countdown),$("#confirm_bingding").unbind("click").bind("click",account.bind),$(".bingding-main input").unbind("keyup").keyup(e.keyup),$(".sent").click(e.sent)}})},keyup:function(){var e=$("input[name=bingding-phone]").val(),t=$("input[name=bingding-code]").val(),n=$("input[name=bingding-password]").val();e!=""&&t!=""&&n!=""&&$(".confirm-bingding").removeAttr("disabled").addClass("bg-btn"),(e==""||t==""||n=="")&&$(".confirm-bingding").attr("disabled",!0).removeClass("bg-btn")},countdown:function(){var e={wait:60,hsTime:function(e){var t=$(this),n=$(e).val();n=n.slice(0,-1),t.addClass("sent");if(n==0)$("#sned_code_Bingding").removeAttr("disabled").removeClass("sent").val("重新发送"),t.wait=60;else{var t=this;$(e).attr("disabled",!0).addClass("sent").val(+t.wait+"S"),t.wait--,setTimeout(function(){t.hsTime(e)},1e3)}}},t=$("input[name=bingding-phone]").val(),n="/user/code?phone="+t;$.get(n,function(e){console.log(e)}),e.hsTime("#sned_code_Bingding")}})});