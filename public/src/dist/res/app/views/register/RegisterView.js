define(["app/views/Base","app/models/User","tpl!app/templates/register/RegisterView.html"],function(e,t,n){"use strict";return e.extend({template:n,construct:function(){var e=this;$(".register-popup").fancybox({afterShow:function(){$("#send_register_code").unbind("click").bind("click",e.countdown),$(".sex-pressed").unbind("click").bind("click",e.optionSex),$(".register-btn").unbind("click").bind("click",account.register),$(".register-panel input").keyup(account.register_keyup),$("#Limit_btn").unbind("click").bind("click",account.login)}})},countdown:function(){var e={wait:60,hsTime:function(e){console.log(e);var t=$(this),n=$(e).val();n=n.slice(0,-1),t.addClass("sent");if(n==0)$("#send_register_code").removeAttr("disabled").removeClass("sent").val("重新发送"),t.wait=60;else{var t=this;$(e).attr("disabled",!0).addClass("sent").val(+t.wait+"S"),t.wait--,setTimeout(function(){t.hsTime(e)},1e3)}}},t=$("#register_phone").val(),n=t.length;if(n!=11)alert("你的手机号码位数不对");else{var t=$("#register_phone").val(),r="/user/code?phone="+t;$.get(r,function(e){console.log(e)}),e.hsTime("#send_register_code")}},optionSex:function(e){$(".sex-pressed").removeClass("boy-pressed").removeClass("girl-pressed"),$(e.currentTarget).addClass("boy-pressed"),$(e.currentTarget).addClass("girl-pressed")}})});