define(["app/views/Base","app/models/User","tpl!app/templates/register/AmendPasswordView.html"],function(e,t,n){"use strict";return e.extend({tagName:"div",className:"",template:n,construct:function(){var e=this;$(".amend-popup").fancybox({afterShow:function(){$("#amend_pwd").unbind("click").bind("click",e.changePassword),$(".amend-main input").keyup(e.keyup)}})},keyup:function(){var e=$("input[name=user_phone]").val(),t=$("input[name=user_oldpassword]").val(),n=$("input[name=user_newpassword]").val(),r=$("input[name=user_anewpassword]").val();e!=""&&t!=""&&n!=""&&r!=""&&$(".amend_pwd").removeAttr("disabled").addClass("bg-btn"),(e==""||t==""||n==""||r=="")&&$(".amend_pwd").attr("disabled",!0).removeClass("bg-btn")},changePassword:function(){var e=$("input[name=user_phone]").val(),t=$("input[name=user_oldpassword]").val(),n=$("input[name=user_newpassword]").val(),r=$("input[name=user_anewpassword]").val();if(e=="")return alert("手机号不能为空"),!1;if(t=="")return alert("旧密码不能为空"),!1;if(n==""||r=="")return alert("密码不能为空"),!1;if(n!=r)return alert("两个密码不相同"),!1;var i="/user/updatePassword",s={old_pwd:t,new_pwd:n};$.post(i,s,function(e){console.log(e)})}})});