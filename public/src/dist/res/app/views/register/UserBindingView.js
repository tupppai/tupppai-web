define(["app/views/Base","app/models/User","tpl!app/templates/register/UserBindingView.html"],function(e,t,n){"use strict";return e.extend({tagName:"div",className:"",template:n,construct:function(){var e=this;$(".binding-popup").fancybox({afterShow:function(){$("#sned_code_Binding").unbind("click").click(e.countdown),$("#confirm_binding").unbind("click").bind("click",account.bind),$(".binding-main input").unbind("keyup").keyup(e.keyup),$(".sent").click(e.sent)}})},keyup:function(){var e=$("input[name=binding-phone]").val(),t=$("input[name=binding-code]").val(),n=$("input[name=binding-password]").val();e!=""&&t!=""&&n!=""&&$(".confirm-binding").removeAttr("disabled").addClass("bg-btn"),(e==""||t==""||n=="")&&$(".confirm-binding").attr("disabled",!0).removeClass("bg-btn")},countdown:function(){var e={wait:60,hsTime:function(e){var t=$(this),n=$(e).val();n=n.slice(0,-1),t.addClass("sent");if(n==0)$("#sned_code_Binding").removeAttr("disabled").removeClass("sent").val("重新发送"),t.wait=60;else{var t=this;$(e).attr("disabled",!0).addClass("sent").val(+t.wait+"S"),t.wait--,setTimeout(function(){t.hsTime(e)},1e3)}}},t=$("input[name=binding-phone]").val(),n=t.length;if(n!=11)alert("你的手机号码位数不对");else{var r="/user/code?phone="+t;$.get(r,function(e){console.log(e)}),e.hsTime("#sned_code_Binding")}}})});