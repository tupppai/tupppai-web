define(["app/views/Base","app/collections/Messages","app/collections/Users","app/collections/Replies","app/collections/Asks","app/collections/Inprogresses","tpl!app/templates/homepage/HomeHeadView.html","app/views/homepage/HomeReplyView","app/views/homepage/HomeAskView","app/views/homepage/HomeConductView","app/views/homepage/HomeFansView","app/views/homepage/HomeAttentionView","app/views/homepage/HomeLikedView","app/views/homepage/HomeCollectionView","app/views/homepage/HomeObtainLikeView","app/views/homepage/HomeHerObtainLikeView"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){"use strict";return e.extend({tagName:"div",className:"",template:o,events:{"click .menu-bar-item":"homeNav","click .menu-nav-reply":"homeReply","click .menu-nav-ask":"homeAsk","click .menu-nav-liked":"homeLiked","click .menu-nav-conduct":"homeConduct","click .menu-nav-collection":"homeCollection","click .personage-fans":"FansList","click .personage-attention":"attentionList","click .personage-link":"personageLink","click #attention":"attention","click #cancel_attention":"cancelAttention","click #home-scrollTop":"scrollTop","mouseenter .ask-work-pic":"homeScroll","mouseleave .ask-work-pic":"homeScroll"},initialize:function(){this.listenTo(this.model,"change",this.render)},onRender:function(){var e=$(".homehead-cantainer").attr("data-id"),t=window.app.user.get("uid");setTimeout(function(){$(".width-hide").removeClass("hide")},3e3),e==t?($("#attention").addClass("hide"),$("#cancel_attention").addClass("hide"),$(".home-self").removeClass("hide")):($(".menu-nav-collection").addClass("hide"),$(".home-others").removeClass("hide"),$(".menu-nav-conduct").addClass("hide"))},homeScroll:function(e){var t=$(e.currentTarget).find(".ask-box"),n=t.length,r=$(e.currentTarget).scrollLeft(),i=$(e.currentTarget).attr("foldTime"),s=parseInt($(e.currentTarget).attr("speed")),o=n*137;$(e.currentTarget).find(".ask-main-pic").css({width:o+"px"}),e.type=="mouseenter"&&(s=1),e.type=="mouseleave"&&(s=-1),$(e.currentTarget).attr("speed",s),n>5&&(clearInterval(i),i=setInterval(function(){s=parseInt(s),r+=s,r+685>o?(clearInterval(i),r=o-685):r<0&&(clearInterval(i),r=0),$(e.currentTarget).attr("foldTime",i),$(e.currentTarget).scrollLeft(r)},8))},homeLiked:function(){$(".fans-nav").addClass("hide"),$(".attention-nav").addClass("hide"),$(".home-like-nav").addClass("hide");var e=$(".menu-nav-liked").attr("data-id"),t=new i,n=new Backbone.Marionette.Region({el:"#homeCantainer"}),r=new h({collection:t});r.scroll(),r.collection.url="/user/uped",r.collection.reset(),r.collection.data.uid=e,r.collection.data.page=0,r.collection.loading(this.showEmptyView),n.show(r)},homeAsk:function(e){$(".fans-nav").addClass("hide"),$(".attention-nav").addClass("hide"),$(".home-like-nav").addClass("hide");var t=$(".menu-nav-reply").attr("data-id"),n=new i,r=new Backbone.Marionette.Region({el:"#homeCantainer"}),s=new a({collection:n});s.scroll(),s.collection.reset(),s.collection.data.uid=t,s.collection.data.page=0,s.collection.data.type="ask",s.collection.loading(this.showEmptyView),r.show(s)},homeReply:function(e){$(".fans-nav").addClass("hide"),$(".attention-nav").addClass("hide"),$(".home-like-nav").addClass("hide");var t=$(".menu-nav-reply").attr("data-id"),n=new Backbone.Marionette.Region({el:"#homeCantainer"}),i=new r,s=new u({collection:i});s.scroll(),s.collection.reset(),s.collection.data.uid=t,s.collection.data.page=0,s.collection.loading(this.showEmptyView),n.show(s)},attention:function(e){var t=$(e.currentTarget),n=t.attr("data-id");$.post("user/follow",{uid:n,status:1},function(e){e.ret==1&&$(t).addClass("hide").siblings().removeClass("hide")})},cancelAttention:function(e){var t=$(e.currentTarget),n=t.attr("data-id");$.post("user/follow",{uid:n,status:0},function(e){e.ret==1&&$(t).addClass("hide").siblings().removeClass("hide")})},attentionList:function(){var e=$(".homehead-cantainer").attr("data-id"),t=window.app.user.get("uid");e==t?($("#attention").addClass("hide"),$("#cancel_attention").addClass("hide"),$(".home-self").removeClass("hide")):($(".home-others").removeClass("hide"),$(".menu-nav-conduct").addClass("hide")),$(".fans-nav").addClass("hide"),$(".home-like-nav").addClass("hide"),$("#homeCantainer").empty(),$(".home-nav").children("li").removeClass("active");var t=$(".menu-nav-reply").attr("data-id"),r=new n,i=new Backbone.Marionette.Region({el:"#homeCantainer"}),s=new c({collection:r});s.scroll(),s.collection.url="/follows",s.collection.reset(),s.collection.data.uid=t,s.collection.data.page=0,s.collection.loading(this.showEmptyView),i.show(s)},personageLink:function(){var e=$(".homehead-cantainer").attr("data-id"),n=window.app.user.get("uid");if(e==n){$("#attention").addClass("hide"),$("#cancel_attention").addClass("hide"),$(".home-self").removeClass("hide"),$(".fans-nav").addClass("hide"),$(".attention-nav").addClass("hide"),$("#homeCantainer").empty(),$(".home-nav").children("li").removeClass("active");var n=$(".menu-nav-reply").attr("data-id"),i=new t;i.data.type="like";var s=new Backbone.Marionette.Region({el:"#homeCantainer"}),o=new d({collection:i});o.scroll(),o.collection.reset(),o.collection.data.uid=n,o.collection.data.page=0,o.collection.loading(this.showEmptyView),s.show(o)}else{$(".home-others").removeClass("hide"),$(".menu-nav-conduct").addClass("hide"),$(".fans-nav").addClass("hide"),$(".attention-nav").addClass("hide"),$("#homeCantainer").empty(),$(".home-nav").children("li").removeClass("active");var n=$(".menu-nav-reply").attr("data-id"),u=new r;u.data.uid=n,u.url="/user/uped",u.data.page=0,u.data.size=10;var s=new Backbone.Marionette.Region({el:"#homeCantainer"}),a=new v({collection:u});a.scroll(),a.collection.reset(),a.collection.data.uid=n,a.collection.data.page=0,a.collection.loading(this.showEmptyView),s.show(a)}},FansList:function(e){var t=$(".homehead-cantainer").attr("data-id"),r=window.app.user.get("uid");t==r?($("#attention").addClass("hide"),$("#cancel_attention").addClass("hide"),$(".home-self").removeClass("hide")):($(".home-others").removeClass("hide"),$(".menu-nav-conduct").addClass("hide")),$("#homeCantainer").empty(),$(".home-nav").children("li").removeClass("active"),$(".attention-nav").addClass("hide"),$(".home-like-nav").addClass("hide");var r=$(".menu-nav-reply").attr("data-id"),i=new n,s=new Backbone.Marionette.Region({el:"#homeCantainer"}),o=new l({collection:i});o.scroll(),o.collection.url="/fans",o.collection.reset(),o.collection.data.uid=r,o.collection.data.page=0,s.show(o),o.collection.loading(this.showEmptyView)},homeConduct:function(e){$(".fans-nav").addClass("hide"),$(".attention-nav").addClass("hide"),$(".home-like-nav").addClass("hide");var t=$(".menu-nav-reply").attr("data-id"),n=new s,r=new Backbone.Marionette.Region({el:"#homeCantainer"}),i=new f({collection:n});i.scroll(),i.collection.reset(),i.collection.data.uid=t,i.collection.data.page=0,i.collection.loading(this.showEmptyView),r.show(i)},homeCollection:function(e){$(".fans-nav").addClass("hide"),$(".attention-nav").addClass("hide"),$(".home-like-nav").addClass("hide");var t=$(".homehead-cantainer").attr("data-id"),n=new r,i=new Backbone.Marionette.Region({el:"#homeCantainer"}),s=new p({collection:n});s.scroll(),s.collection.url="/user/collections",s.collection.reset(),s.collection.data.uid=t,s.collection.data.page=0,s.collection.loading(this.showEmptyView),i.show(s)},homeNav:function(e){$(e.currentTarget).addClass("active").siblings().removeClass("active");var t=$(e.currentTarget).attr("data-type"),n=$(e.currentTarget).attr("data-id");$(".ask-uploading-popup-hide").addClass("hide"),$("#homeCantainer").empty()},showEmptyView:function(e){$(".inner-container .emptyContentView").empty(),$(".inner-container .emptyContentView").addClass("hide"),$(".addReplyMinHeight").addClass("ReplyMinHeight"),e.data.page==1&&e.length==0&&(append($("#contentView"),".emptyContentView"),$(".addReplyMinHeight").removeClass("ReplyMinHeight"))}})});