define(["app/views/Base","app/collections/Messages","app/collections/Asks","tpl!app/templates/message/MessageView.html","app/views/message/MessagePraiseView"],function(e,t,n,r,i){"use strict";return e.extend({tagName:"div",className:"",template:r,events:{"click .message .nav":"switchNav","click .message-receive":"sendComment","click .message-issue":"sendComment","click .like-receive":"sendLike","click .like-issue":"sendLike"},construct:function(){$("a.menu-bar-item").removeClass("active"),this.listenTo(this.model,"change",this.render)},onRender:function(){setTimeout(function(){$(".header-back").addClass("height-reduce")},1e3)},switchNav:function(e){var t=this,n=$(e.currentTarget).attr("data");location.href="/#message/"+n},sendComment:function(e){$(e.currentTarget).hasClass("message-receive")&&(window.location.replace("#message/comment"),setTimeout(function(){$(".title-comment").removeClass("blo").siblings("span").addClass("blo"),$(".message-issue").removeClass("nav-change").siblings("span").addClass("nav-change")},500)),$(e.currentTarget).hasClass("message-issue")&&(window.location.replace("#message/send_comment"),setTimeout(function(){$(".title-comment").removeClass("blo").siblings("span").addClass("blo"),$(".message-receive").removeClass("nav-change").siblings("span").addClass("nav-change")},500))},sendLike:function(e){if($(e.currentTarget).hasClass("like-receive")){$("#message-item-list").empty();var r=new t;r.data.type="like";var s=new Backbone.Marionette.Region({el:"#message-item-list"}),o=new i({collection:r});s.show(o),$(".title-praise").removeClass("blo").siblings("span").addClass("blo"),$(".like-issue").removeClass("nav-change").siblings("span").addClass("nav-change")}if($(e.currentTarget).hasClass("like-issue")){$("#message-item-list").empty();var r=new n;r.data.url="/user/uped";var s=new Backbone.Marionette.Region({el:"#message-item-list"}),o=new i({collection:r});s.show(o),$(".title-praise").removeClass("blo").siblings("span").addClass("blo"),$(".like-receive").removeClass("nav-change").siblings("span").addClass("nav-change")}}})});