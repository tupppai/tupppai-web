(function(){function s(e,n,r){var i=document.createElement("form");i.setAttribute("method",n),i.setAttribute("action",e);for(var s in r)if(t.call(r,s)){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",s),o.setAttribute("value",r[s]),i.appendChild(o)}document.body.appendChild(i),i.submit()}function o(e,t,n){typeof n=="undefined"&&(n=!1);var r=[];for(var i in e){if(t=="bfb_wap"&&i=="url")continue;if(t=="yeepay_wap"&&i=="mode")continue;r.push(i+"="+(n?encodeURIComponent(e[i]):e[i]))}return r.join("&")}var e="2.0.8",t={}.hasOwnProperty,n=function(){},r={PINGPP_NOTIFY_URL:"https://api.pingxx.com/notify/charges/",PINGPP_MOCK_URL:"http://sissi.pingxx.com/mock.php",ALIPAY_PC_DIRECT_URL:"https://mapi.alipay.com/gateway.do",UPACP_PC_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",CP_B2B_URL:"https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0"},i={alipay_pc_direct:"alipay_pc_direct",upacp_pc:"upacp_pc",cp_b2b:"cp_b2b"};n.prototype={version:e,_resultCallback:undefined,_debug:!1,createPayment:function(e,n,u){typeof n=="function"&&(this._resultCallback=n),typeof u=="boolean"&&(this._debug=u);var a;if(typeof e=="string")try{a=JSON.parse(e)}catch(f){this._innerCallback("fail",this._error("json_decode_fail"));return}else a=e;if(typeof a=="undefined"){this._innerCallback("fail",this._error("json_decode_fail"));return}if(!t.call(a,"id")){this._innerCallback("fail",this._error("invalid_charge","no_charge_id"));return}if(!t.call(a,"channel")){this._innerCallback("fail",this._error("invalid_charge","no_channel"));return}var l=a.channel;if(!t.call(a,"credential")){this._innerCallback("fail",this._error("invalid_charge","no_credential"));return}if(!a.credential){this._innerCallback("fail",this._error("invalid_credential","credential_is_undefined"));return}if(!t.call(i,l)){this._innerCallback("fail",this._error("invalid_charge","no_such_channel:"+l));return}if(!t.call(a.credential,l)){this._innerCallback("fail",this._error("invalid_credential","no_valid_channel_credential"));return}if(!t.call(a,"livemode")){this._innerCallback("fail",this._error("invalid_charge","no_livemode"));return}if(a["livemode"]==0){this._testModeNotify(a);return}var c=a.credential[l];if(l==i.upacp_pc)s(r.UPACP_PC_URL,"post",c);else if(l==i.alipay_pc_direct){t.call(c,"_input_charset")||(c._input_charset="utf-8");var h=o(c,l,!0);window.location.href=r.ALIPAY_PC_DIRECT_URL+"?"+h}else l==i.cp_b2b&&s(r.CP_B2B_URL,"post",c)},_error:function(e,t){return e=typeof e=="undefined"?"":e,t=typeof t=="undefined"?"":t,{msg:e,extra:t}},_innerCallback:function(e,t){typeof this._resultCallback=="function"&&(typeof t=="undefined"&&(t=this._error()),this._resultCallback(e,t))},_testModeNotify:function(e){var n={ch_id:e.id,scheme:"http",channel:e.channel};t.call(e,"order_no")?n.order_no=e.order_no:t.call(e,"orderNo")&&(n.order_no=e.orderNo),t.call(e,"time_expire")?n.time_expire=e.time_expire:t.call(e,"timeExpire")&&(n.time_expire=e.timeExpire),t.call(e,"extra")&&(n.extra=encodeURIComponent(JSON.stringify(e.extra))),location.href=r.PINGPP_MOCK_URL+"?"+o(n)}},n.prototype.payment=n.prototype.createPayment,window.pingppPc=new n})();