define(["app/views/Base","app/collections/Inprogresses","app/views/homepage/HomeTask","app/views/homepage/HomeComplete","tpl!app/templates/homepage/HomeCollectionView.html"],function(e,t,n,r,i){"use strict";return e.extend({tagName:"div",className:"",template:i,collections:t,events:{"click .download":"download","click .reply-uploading-popup":"askImageUrl","click .nav-item":"task"},task:function(e){$(".fans-nav").addClass("hide"),$(".attention-nav").addClass("hide"),$(".home-like-nav").addClass("hide"),$(".nav-item").removeClass("active"),$(e.currentTarget).addClass("active");var i=$(".menu-nav-reply").attr("data-id"),s=$(e.currentTarget).attr("data-type");$("#taskList").empty();if(s=="task"){var o=new t;o.url="/task/doing";var u=new Backbone.Marionette.Region({el:"#taskList"}),a=new n({collection:o});a.scroll(),a.collection.reset(),a.collection.data.uid=i,a.collection.data.page=0,a.collection.loading(this.showEmptyView),u.show(a)}else{var o=new t;o.url="/task/finished";var u=new Backbone.Marionette.Region({el:"#taskList"}),a=new r({collection:o});a.scroll(),a.collection.reset(),a.collection.data.uid=i,a.collection.data.page=0,a.collection.loading(this.showEmptyView),u.show(a)}},onShow:function(){$("li.nav-item[data-type=task]").trigger("click",function(){})},construct:function(){var e=$(".inprogress-popup");$(".inprogress-popup").fancybox({afterShow:function(){$(".conduct-upload").unbind("click").bind("click",askImageUrl)}})},askImageUrl:function(e){var t=$(e.currentTarget).attr("ask-id");$("#reply-uploading-popup").attr("ask-id",t);var n=$(e.currentTarget).parents(".conduct-right").siblings(".conduct-pic").find("img").attr("src");$("#ask_image img").attr("src",n)}})});