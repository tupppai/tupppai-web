/*!
 * Masonry PACKAGED v3.3.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */

/**
 * Bridget makes jQuery widgets
 * v1.1.0
 * MIT license
 */

/*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */

/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */

/*!
 * getStyleProperty v1.0.4
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 * MIT license
 */

/*!
 * getSize v1.2.2
 * measure size of elements
 * MIT license
 */

/*!
 * docReady v1.0.4
 * Cross browser DOMContentLoaded event emitter
 * MIT license
 */

/**
 * matchesSelector v1.0.3
 * matchesSelector( element, '.selector' )
 * MIT license
 */

/**
 * Fizzy UI utils v1.0.1
 * MIT license
 */

/*!
 * Outlayer v1.4.2
 * the brains and guts of a layout library
 * MIT license
 */

/*!
 * Masonry v3.3.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */

(function(e){function n(){}function r(e){function r(t){if(t.prototype.option)return;t.prototype.option=function(t){if(!e.isPlainObject(t))return;this.options=e.extend(!0,this.options,t)}}function s(n,r){e.fn[n]=function(s){if(typeof s=="string"){var o=t.call(arguments,1);for(var u=0,a=this.length;u<a;u++){var f=this[u],l=e.data(f,n);if(!l){i("cannot call methods on "+n+" prior to initialization; "+"attempted to call '"+s+"'");continue}if(!e.isFunction(l[s])||s.charAt(0)==="_"){i("no such method '"+s+"' for "+n+" instance");continue}var c=l[s].apply(l,o);if(c!==undefined)return c}return this}return this.each(function(){var t=e.data(this,n);t?(t.option(s),t._init()):(t=new r(this,s),e.data(this,n,t))})}}if(!e)return;var i=typeof console=="undefined"?n:function(e){console.error(e)};return e.bridget=function(e,t){r(t),s(e,t)},e.bridget}var t=Array.prototype.slice;typeof define=="function"&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],r):typeof exports=="object"?r(require("jquery")):r(e.jQuery)})(window),function(e){function r(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var t=document.documentElement,n=function(){};t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(e,t,n){e[t+n]=n.handleEvent?function(){var t=r(e);n.handleEvent.call(n,t)}:function(){var t=r(e);n.call(e,t)},e.attachEvent("on"+t,e[t+n])});var i=function(){};t.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=undefined}});var s={bind:n,unbind:i};typeof define=="function"&&define.amd?define("eventie/eventie",s):typeof exports=="object"?module.exports=s:e.eventie=s}(window),function(){function e(){}function i(e,t){var n=e.length;while(n--)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}var t=e.prototype,n=this,r=n.EventEmitter;t.getListeners=function(t){var n=this._getEvents(),r,i;if(t instanceof RegExp){r={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(r[i]=n[i])}else r=n[t]||(n[t]=[]);return r},t.flattenListeners=function(t){var n=[],r;for(r=0;r<t.length;r+=1)n.push(t[r].listener);return n},t.getListenersAsObject=function(t){var n=this.getListeners(t),r;return n instanceof Array&&(r={},r[t]=n),r||n},t.addListener=function(t,n){var r=this.getListenersAsObject(t),s=typeof n=="object",o;for(o in r)r.hasOwnProperty(o)&&i(r[o],n)===-1&&r[o].push(s?n:{listener:n,once:!1});return this},t.on=s("addListener"),t.addOnceListener=function(t,n){return this.addListener(t,{listener:n,once:!0})},t.once=s("addOnceListener"),t.defineEvent=function(t){return this.getListeners(t),this},t.defineEvents=function(t){for(var n=0;n<t.length;n+=1)this.defineEvent(t[n]);return this},t.removeListener=function(t,n){var r=this.getListenersAsObject(t),s,o;for(o in r)r.hasOwnProperty(o)&&(s=i(r[o],n),s!==-1&&r[o].splice(s,1));return this},t.off=s("removeListener"),t.addListeners=function(t,n){return this.manipulateListeners(!1,t,n)},t.removeListeners=function(t,n){return this.manipulateListeners(!0,t,n)},t.manipulateListeners=function(t,n,r){var i,s,o=t?this.removeListener:this.addListener,u=t?this.removeListeners:this.addListeners;if(typeof n!="object"||n instanceof RegExp){i=r.length;while(i--)o.call(this,n,r[i])}else for(i in n)n.hasOwnProperty(i)&&(s=n[i])&&(typeof s=="function"?o.call(this,i,s):u.call(this,i,s));return this},t.removeEvent=function(t){var n=typeof t,r=this._getEvents(),i;if(n==="string")delete r[t];else if(t instanceof RegExp)for(i in r)r.hasOwnProperty(i)&&t.test(i)&&delete r[i];else delete this._events;return this},t.removeAllListeners=s("removeEvent"),t.emitEvent=function(t,n){var r=this.getListenersAsObject(t),i,s,o,u;for(o in r)if(r.hasOwnProperty(o)){s=r[o].length;while(s--)i=r[o][s],i.once===!0&&this.removeListener(t,i.listener),u=i.listener.apply(this,n||[]),u===this._getOnceReturnValue()&&this.removeListener(t,i.listener)}return this},t.trigger=s("emitEvent"),t.emit=function(t){var n=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,n)},t.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},t._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},t._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=r,e},typeof define=="function"&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):typeof module=="object"&&module.exports?module.exports=e:n.EventEmitter=e}.call(this),function(e){function r(e){if(!e)return;if(typeof n[e]=="string")return e;e=e.charAt(0).toUpperCase()+e.slice(1);var r;for(var i=0,s=t.length;i<s;i++){r=t[i]+e;if(typeof n[r]=="string")return r}}var t="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;typeof define=="function"&&define.amd?define("get-style-property/get-style-property",[],function(){return r}):typeof exports=="object"?module.exports=r:e.getStyleProperty=r}(window),function(e,t){function n(e){var t=parseFloat(e),n=e.indexOf("%")===-1&&!isNaN(t);return n&&t}function r(){}function o(){var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var t=0,n=s.length;t<n;t++){var r=s[t];e[r]=0}return e}function u(t){function l(){if(r)return;r=!0;var s=e.getComputedStyle;u=function(){var e=s?function(e){return s(e,null)}:function(e){return e.currentStyle};return function(n){var r=e(n);return r||i("Style returned "+r+". Are you running this code in a hidden iframe on Firefox? "+"See http://bit.ly/getsizebug1"),r}}(),a=t("boxSizing");if(a){var o=document.createElement("div");o.style.width="200px",o.style.padding="1px 2px 3px 4px",o.style.borderStyle="solid",o.style.borderWidth="1px 2px 3px 4px",o.style[a]="border-box";var l=document.body||document.documentElement;l.appendChild(o);var c=u(o);f=n(c.width)===200,l.removeChild(o)}}function c(e){l(),typeof e=="string"&&(e=document.querySelector(e));if(!e||typeof e!="object"||!e.nodeType)return;var t=u(e);if(t.display==="none")return o();var r={};r.width=e.offsetWidth,r.height=e.offsetHeight;var i=r.isBorderBox=!!a&&!!t[a]&&t[a]==="border-box";for(var c=0,p=s.length;c<p;c++){var d=s[c],v=t[d];v=h(e,v);var m=parseFloat(v);r[d]=isNaN(m)?0:m}var g=r.paddingLeft+r.paddingRight,y=r.paddingTop+r.paddingBottom,b=r.marginLeft+r.marginRight,w=r.marginTop+r.marginBottom,E=r.borderLeftWidth+r.borderRightWidth,S=r.borderTopWidth+r.borderBottomWidth,x=i&&f,T=n(t.width);T!==!1&&(r.width=T+(x?0:g+E));var N=n(t.height);return N!==!1&&(r.height=N+(x?0:y+S)),r.innerWidth=r.width-(g+E),r.innerHeight=r.height-(y+S),r.outerWidth=r.width+b,r.outerHeight=r.height+w,r}function h(t,n){if(e.getComputedStyle||n.indexOf("%")===-1)return n;var r=t.style,i=r.left,s=t.runtimeStyle,o=s&&s.left;return o&&(s.left=t.currentStyle.left),r.left=n,n=r.pixelLeft,r.left=i,o&&(s.left=o),n}var r=!1,u,a,f;return c}var i=typeof console=="undefined"?r:function(e){console.error(e)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];typeof define=="function"&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],u):typeof exports=="object"?module.exports=u(require("desandro-get-style-property")):e.getSize=u(e.getStyleProperty)}(window),function(e){function r(e){if(typeof e!="function")return;r.isReady?e():n.push(e)}function i(e){var n=e.type==="readystatechange"&&t.readyState!=="complete";if(r.isReady||n)return;s()}function s(){r.isReady=!0;for(var e=0,t=n.length;e<t;e++){var i=n[e];i()}}function o(n){return t.readyState==="complete"?s():(n.bind(t,"DOMContentLoaded",i),n.bind(t,"readystatechange",i),n.bind(e,"load",i)),r}var t=e.document,n=[];r.isReady=!1,typeof define=="function"&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],o):typeof exports=="object"?module.exports=o(require("eventie")):e.docReady=o(e.eventie)}(window),function(e){function n(e,n){return e[t](n)}function r(e){if(e.parentNode)return;var t=document.createDocumentFragment();t.appendChild(e)}function i(e,t){r(e);var n=e.parentNode.querySelectorAll(t);for(var i=0,s=n.length;i<s;i++)if(n[i]===e)return!0;return!1}function s(e,t){return r(e),n(e,t)}var t=function(){if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";var t=["webkit","moz","ms","o"];for(var n=0,r=t.length;n<r;n++){var i=t[n],s=i+"MatchesSelector";if(e[s])return s}}(),o;if(t){var u=document.createElement("div"),a=n(u,"div");o=a?n:s}else o=i;typeof define=="function"&&define.amd?define("matches-selector/matches-selector",[],function(){return o}):typeof exports=="object"?module.exports=o:window.matchesSelector=o}(Element.prototype),function(e,t){typeof define=="function"&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(n,r){return t(e,n,r)}):typeof exports=="object"?module.exports=t(e,require("doc-ready"),require("desandro-matches-selector")):e.fizzyUIUtils=t(e,e.docReady,e.matchesSelector)}(window,function(t,n,r){var i={};i.extend=function(e,t){for(var n in t)e[n]=t[n];return e},i.modulo=function(e,t){return(e%t+t)%t};var s=Object.prototype.toString;i.isArray=function(e){return s.call(e)=="[object Array]"},i.makeArray=function(e){var t=[];if(i.isArray(e))t=e;else if(e&&typeof e.length=="number")for(var n=0,r=e.length;n<r;n++)t.push(e[n]);else t.push(e);return t},i.indexOf=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},i.removeFrom=function(e,t){var n=i.indexOf(e,t);n!=-1&&e.splice(n,1)},i.isElement=typeof HTMLElement=="function"||typeof HTMLElement=="object"?function(t){return t instanceof HTMLElement}:function(t){return t&&typeof t=="object"&&t.nodeType==1&&typeof t.nodeName=="string"},i.setText=function(){function t(t,n){e=e||(document.documentElement.textContent!==undefined?"textContent":"innerText"),t[e]=n}var e;return t}(),i.getParent=function(e,t){while(e!=document.body){e=e.parentNode;if(r(e,t))return e}},i.getQueryElement=function(e){return typeof e=="string"?document.querySelector(e):e},i.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.filterFindElements=function(e,t){e=i.makeArray(e);var n=[];for(var s=0,o=e.length;s<o;s++){var u=e[s];if(!i.isElement(u))continue;if(t){r(u,t)&&n.push(u);var a=u.querySelectorAll(t);for(var f=0,l=a.length;f<l;f++)n.push(a[f])}else n.push(u)}return n},i.debounceMethod=function(e,t,n){var r=e.prototype[t],i=t+"Timeout";e.prototype[t]=function(){var e=this[i];e&&clearTimeout(e);var t=arguments,s=this;this[i]=setTimeout(function(){r.apply(s,t),delete s[i]},n||100)}},i.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()};var o=t.console;return i.htmlInit=function(e,r){n(function(){var n=i.toDashed(r),s=document.querySelectorAll(".js-"+n),u="data-"+n+"-options";for(var a=0,f=s.length;a<f;a++){var l=s[a],c=l.getAttribute(u),h;try{h=c&&JSON.parse(c)}catch(p){o&&o.error("Error parsing "+u+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+p);continue}var d=new e(l,h),v=t.jQuery;v&&v.data(l,r,d)}})},i}),function(e,t){typeof define=="function"&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(n,r,i,s){return t(e,n,r,i,s)}):typeof exports=="object"?module.exports=t(e,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(e.Outlayer={},e.Outlayer.Item=t(e,e.EventEmitter,e.getSize,e.getStyleProperty,e.fizzyUIUtils))}(window,function(t,n,r,i,s){function a(e){for(var t in e)return!1;return t=null,!0}function m(e,t){if(!e)return;this.element=e,this.layout=t,this.position={x:0,y:0},this._create()}function g(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var o=t.getComputedStyle,u=o?function(e){return o(e,null)}:function(e){return e.currentStyle},f=i("transition"),l=i("transform"),c=f&&l,h=!!i("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[f],d=["transform","transition","transitionDuration","transitionProperty"],v=function(){var e={};for(var t=0,n=d.length;t<n;t++){var r=d[t],s=i(r);s&&s!==r&&(e[r]=s)}return e}();s.extend(m.prototype,n.prototype),m.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},m.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},m.prototype.getSize=function(){this.size=r(this.element)},m.prototype.css=function(e){var t=this.element.style;for(var n in e){var r=v[n]||n;t[r]=e[n]}},m.prototype.getPosition=function(){var e=u(this.element),t=this.layout.options,n=t.isOriginLeft,r=t.isOriginTop,i=e[n?"left":"right"],s=e[r?"top":"bottom"],o=this.layout.size,a=i.indexOf("%")!=-1?parseFloat(i)/100*o.width:parseInt(i,10),f=s.indexOf("%")!=-1?parseFloat(s)/100*o.height:parseInt(s,10);a=isNaN(a)?0:a,f=isNaN(f)?0:f,a-=n?o.paddingLeft:o.paddingRight,f-=r?o.paddingTop:o.paddingBottom,this.position.x=a,this.position.y=f},m.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={},r=t.isOriginLeft?"paddingLeft":"paddingRight",i=t.isOriginLeft?"left":"right",s=t.isOriginLeft?"right":"left",o=this.position.x+e[r];n[i]=this.getXValue(o),n[s]="";var u=t.isOriginTop?"paddingTop":"paddingBottom",a=t.isOriginTop?"top":"bottom",f=t.isOriginTop?"bottom":"top",l=this.position.y+e[u];n[a]=this.getYValue(l),n[f]="",this.css(n),this.emitEvent("layout",[this])},m.prototype.getXValue=function(e){var t=this.layout.options;return t.percentPosition&&!t.isHorizontal?e/this.layout.size.width*100+"%":e+"px"},m.prototype.getYValue=function(e){var t=this.layout.options;return t.percentPosition&&t.isHorizontal?e/this.layout.size.height*100+"%":e+"px"},m.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),s=parseInt(t,10),o=i===this.position.x&&s===this.position.y;this.setPosition(e,t);if(o&&!this.isTransitioning){this.layoutPosition();return}var u=e-n,a=t-r,f={};f.transform=this.getTranslate(u,a),this.transition({to:f,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},m.prototype.getTranslate=function(e,t){var n=this.layout.options;return e=n.isOriginLeft?e:-e,t=n.isOriginTop?t:-t,h?"translate3d("+e+"px, "+t+"px, 0)":"translate("+e+"px, "+t+"px)"},m.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},m.prototype.moveTo=c?m.prototype._transitionTo:m.prototype.goTo,m.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},m.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},m.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(e);return}var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var y="opacity,"+g(v.transform||"transform");m.prototype.enableTransition=function(){if(this.isTransitioning)return;this.css({transitionProperty:y,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(p,this,!1)},m.prototype.transition=m.prototype[f?"_transition":"_nonTransition"],m.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},m.prototype.onotransitionend=function(e){this.ontransitionend(e)};var b={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};m.prototype.ontransitionend=function(e){if(e.target!==this.element)return;var t=this._transn,n=b[e.propertyName]||e.propertyName;delete t.ingProperties[n],a(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]);if(n in t.onEnd){var r=t.onEnd[n];r.call(this),delete t.onEnd[n]}this.emitEvent("transitionEnd",[this])},m.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},m.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var w={transitionProperty:"",transitionDuration:""};return m.prototype.removeTransitionStyles=function(){this.css(w)},m.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},m.prototype.remove=function(){if(!f||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var e=this;this.once("transitionEnd",function(){e.removeElem()}),this.hide()},m.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("visibleStyle");t[n]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},m.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},m.prototype.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var n in t)return n},m.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");t[n]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},m.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},m.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},m}),function(e,t){typeof define=="function"&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(n,r,i,s,o){return t(e,n,r,i,s,o)}):typeof exports=="object"?module.exports=t(e,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):e.Outlayer=t(e,e.eventie,e.EventEmitter,e.getSize,e.fizzyUIUtils,e.Outlayer.Item)}(window,function(t,n,r,i,s,o){function h(e,t){var n=s.getQueryElement(e);if(!n){u&&u.error("Bad element for "+this.constructor.namespace+": "+(n||e));return}this.element=n,a&&(this.$element=a(this.element)),this.options=s.extend({},this.constructor.defaults),this.option(t);var r=++l;this.element.outlayerGUID=r,c[r]=this,this._create(),this.options.isInitLayout&&this.layout()}var u=t.console,a=t.jQuery,f=function(){},l=0,c={};return h.namespace="outlayer",h.Item=o,h.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},s.extend(h.prototype,r.prototype),h.prototype.option=function(e){s.extend(this.options,e)},h.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),s.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},h.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},h.prototype._itemize=function(e){var t=this._filterFindItemElements(e),n=this.constructor.Item,r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],u=new n(o,this);r.push(u)}return r},h.prototype._filterFindItemElements=function(e){return s.filterFindElements(e,this.options.itemSelector)},h.prototype.getItemElements=function(){var e=[];for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].element);return e},h.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},h.prototype._init=h.prototype.layout,h.prototype._resetLayout=function(){this.getSize()},h.prototype.getSize=function(){this.size=i(this.element)},h.prototype._getMeasurement=function(e,t){var n=this.options[e],r;n?(typeof n=="string"?r=this.element.querySelector(n):s.isElement(n)&&(r=n),this[e]=r?i(r)[t]:n):this[e]=0},h.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},h.prototype._getItemsForLayout=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];i.isIgnored||t.push(i)}return t},h.prototype._layoutItems=function(e,t){this._emitCompleteOnItems("layout",e);if(!e||!e.length)return;var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r],o=this._getItemLayoutPosition(s);o.item=s,o.isInstant=t||s.isLayoutInstant,n.push(o)}this._processLayoutQueue(n)},h.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},h.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}},h.prototype._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)},h.prototype._postLayout=function(){this.resizeContainer()},h.prototype.resizeContainer=function(){if(!this.options.isResizingContainer)return;var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))},h.prototype._getContainerSize=f,h.prototype._setContainerMeasure=function(e,t){if(e===undefined)return;var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"},h.prototype._emitCompleteOnItems=function(e,t){function r(){n.dispatchEvent(e+"Complete",null,[t])}function o(){s++,s===i&&r()}var n=this,i=t.length;if(!t||!i){r();return}var s=0;for(var u=0,a=t.length;u<a;u++){var f=t[u];f.once(e,o)}},h.prototype.dispatchEvent=function(e,t,n){var r=t?[t].concat(n):n;this.emitEvent(e,r);if(a){this.$element=this.$element||a(this.element);if(t){var i=a.Event(t);i.type=e,this.$element.trigger(i,n)}else this.$element.trigger(e,n)}},h.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},h.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},h.prototype.stamp=function(e){e=this._find(e);if(!e)return;this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;t<n;t++){var r=e[t];this.ignore(r)}},h.prototype.unstamp=function(e){e=this._find(e);if(!e)return;for(var t=0,n=e.length;t<n;t++){var r=e[t];s.removeFrom(this.stamps,r),this.unignore(r)}},h.prototype._find=function(e){if(!e)return;return typeof e=="string"&&(e=this.element.querySelectorAll(e)),e=s.makeArray(e),e},h.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length)return;this._getBoundingRect();for(var e=0,t=this.stamps.length;e<t;e++){var n=this.stamps[e];this._manageStamp(n)}},h.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},h.prototype._manageStamp=f,h.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,r=i(e),s={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return s},h.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},h.prototype.bindResize=function(){if(this.isResizeBound)return;n.bind(t,"resize",this),this.isResizeBound=!0},h.prototype.unbindResize=function(){this.isResizeBound&&n.unbind(t,"resize",this),this.isResizeBound=!1},h.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},h.prototype.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout())return;this.layout()},h.prototype.needsResizeLayout=function(){var e=i(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},h.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},h.prototype.appended=function(e){var t=this.addItems(e);if(!t.length)return;this.layoutItems(t,!0),this.reveal(t)},h.prototype.prepended=function(e){var t=this._itemize(e);if(!t.length)return;var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)},h.prototype.reveal=function(e){this._emitCompleteOnItems("reveal",e);var t=e&&e.length;for(var n=0;t&&n<t;n++){var r=e[n];r.reveal()}},h.prototype.hide=function(e){this._emitCompleteOnItems("hide",e);var t=e&&e.length;for(var n=0;t&&n<t;n++){var r=e[n];r.hide()}},h.prototype.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},h.prototype.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},h.prototype.getItem=function(e){for(var t=0,n=this.items.length;t<n;t++){var r=this.items[t];if(r.element===e)return r}},h.prototype.getItems=function(e){e=s.makeArray(e);var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n],o=this.getItem(i);o&&t.push(o)}return t},h.prototype.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t);if(!t||!t.length)return;for(var n=0,r=t.length;n<r;n++){var i=t[n];i.remove(),s.removeFrom(this.items,i)}},h.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;t<n;t++){var r=this.items[t];r.destroy()}this.unbindResize();var i=this.element.outlayerGUID;delete c[i],delete this.element.outlayerGUID,a&&a.removeData(this.element,this.constructor.namespace)},h.data=function(e){e=s.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&c[t]},h.create=function(e,t){function n(){h.apply(this,arguments)}return Object.create?n.prototype=Object.create(h.prototype):s.extend(n.prototype,h.prototype),n.prototype.constructor=n,n.defaults=s.extend({},h.defaults),s.extend(n.defaults,t),n.prototype.settings={},n.namespace=e,n.data=h.data,n.Item=function(){o.apply(this,arguments)},n.Item.prototype=new o,s.htmlInit(n,e),a&&a.bridget&&a.bridget(e,n),n},h.Item=o,h}),function(e,t){typeof define=="function"&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],t):typeof exports=="object"?module.exports=t(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):e.Masonry=t(e.Outlayer,e.getSize,e.fizzyUIUtils)}(window,function(t,n,r){var i=t.create("masonry");return i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;this.colYs=[];while(e--)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var e=this.items[0],t=e&&e.element;this.columnWidth=t&&n(t).outerWidth||this.containerWidth}var r=this.columnWidth+=this.gutter,i=this.containerWidth+this.gutter,s=i/r,o=r-i%r,u=o&&o<1?"round":"floor";s=Math[u](s),this.cols=Math.max(s,1)},i.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,t=n(e);this.containerWidth=t&&t.innerWidth},i.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,n=t&&t<1?"round":"ceil",i=Math[n](e.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);var s=this._getColGroup(i),o=Math.min.apply(Math,s),u=r.indexOf(s,o),a={x:this.columnWidth*u,y:o},f=o+e.size.outerHeight,l=this.cols+1-s.length;for(var c=0;c<l;c++)this.colYs[u+c]=f;return a},i.prototype._getColGroup=function(e){if(e<2)return this.colYs;var t=[],n=this.cols+1-e;for(var r=0;r<n;r++){var i=this.colYs.slice(r,r+e);t[r]=Math.max.apply(Math,i)}return t},i.prototype._manageStamp=function(e){var t=n(e),r=this._getElementOffset(e),i=this.options.isOriginLeft?r.left:r.right,s=i+t.outerWidth,o=Math.floor(i/this.columnWidth);o=Math.max(0,o);var u=Math.floor(s/this.columnWidth);u-=s%this.columnWidth?0:1,u=Math.min(this.cols-1,u);var a=(this.options.isOriginTop?r.top:r.bottom)+t.outerHeight;for(var f=o;f<=u;f++)this.colYs[f]=Math.max(a,this.colYs[f])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},i.prototype._getContainerFitWidth=function(){var e=0,t=this.cols;while(--t){if(this.colYs[t]!==0)break;e++}return(this.cols-e)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},i});